(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{141:function(e,t){},143:function(e,t){},155:function(e,t,a){},156:function(e,t,a){"use strict";a.r(t);var n,c=a(0),r=a(9),i=a.n(r),l=a(18),o=a(23),s=a(88),d=a(196),j=a(192),b=a(198),u=a(186),m=a(189),x=a(157),O=a(191),p=a(197),h=a(89),f=a(193),g=a(194),v=a(195),C=a(90),y=a(55),w=a.n(y),k=a(3),N=Object(c.createContext)(),S=Object(C.io)("https://av-vid-chat-app.herokuapp.com/"),I=function(e){var t=e.children,a=Object(c.useState)(null),n=Object(l.a)(a,2),r=n[0],i=n[1],o=Object(c.useState)(""),s=Object(l.a)(o,2),d=s[0],j=s[1],b=Object(c.useState)({}),u=Object(l.a)(b,2),m=u[0],x=u[1],O=Object(c.useState)(!1),p=Object(l.a)(O,2),h=p[0],f=p[1],g=Object(c.useState)(!1),v=Object(l.a)(g,2),C=v[0],y=v[1],I=Object(c.useState)(""),A=Object(l.a)(I,2),E=A[0],B=A[1],D=Object(c.useRef)(),R=Object(c.useRef)(),V=Object(c.useRef)();Object(c.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){i(e),D.current.srcObject=e})),S.on("me",(function(e){j(e)})),S.on("callUser",(function(e){var t=e.from,a=e.name,n=e.signal;x({isRecievedCall:!0,from:t,name:a,signal:n})}))}),[]);return Object(k.jsx)(N.Provider,{value:{call:m,callAccepted:h,MyVideo:D,userVideo:R,stream:r,name:E,setName:B,callEnded:C,me:d,callUser:function(e){var t=new w.a({initiator:!0,trickle:!1,stream:r});t.on("signal",(function(t){S.emit("callUser",{userToCall:e,signalData:t,from:d,name:E})})),t.on("stream",(function(e){R.current.srcObject=e})),S.on("callAccepted",(function(e){f(!0),t.signal(e)})),V.current=t},LeaveCall:function(){y(!0),V.current.destroy(),window.location.reload()},answerCall:function(){f(!0);var e=new w.a({initiator:!1,trickle:!1,stream:r});e.on("signal",(function(e){S.emit("answerCall",{signal:e,to:m.from})})),e.on("stream",(function(e){R.current.srcObject=e})),e.signal(m.signal),V.current=e}},children:t})},A=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(o.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(o.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{backgroundColor:"#33334d",padding:"10px 20px",border:"2px solid black"}}})),E=function(e){var t=e.children,a=Object(c.useContext)(N),n=a.me,r=a.callAccepted,i=a.name,o=a.setName,s=a.LeaveCall,d=a.callUser,u=a.callEnded,C=Object(c.useState)(""),y=Object(l.a)(C,2),w=y[0],S=y[1],I=A();return Object(k.jsx)(m.a,{className:I.container,children:Object(k.jsxs)(x.a,{elevation:10,className:I.paper,children:[Object(k.jsx)("form",{className:I.root,noValidate:!0,autoComplete:"off",children:Object(k.jsxs)(O.a,{container:!0,className:I.gridContainer,children:[Object(k.jsxs)(O.a,{item:!0,xs:12,md:6,className:I.padding,children:[Object(k.jsx)(j.a,{gutterBottom:!0,variant:"h6",children:Object(k.jsx)("b",{children:"Account info"})}),Object(k.jsx)(p.a,{label:"name",value:i,onChange:function(e){return o(e.target.value)},fullWidth:!0}),Object(k.jsx)(h.CopyToClipboard,{text:n,className:I.margin,children:Object(k.jsx)(b.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(k.jsx)(f.a,{fontSize:"large"}),children:"Copy your Id"})})]}),Object(k.jsxs)(O.a,{item:!0,xs:12,md:6,className:I.padding,children:[Object(k.jsx)(j.a,{gutterBottom:!0,variant:"h6",children:Object(k.jsx)("b",{children:"Make a Call"})}),Object(k.jsx)(p.a,{label:"ID to Call",value:w,onChange:function(e){return S(e.target.value)},fullWidth:!0}),r&&!u?Object(k.jsx)(b.a,{variant:"contained",color:"secondary",startIcon:Object(k.jsx)(g.a,{fontSize:"large"}),fullWidth:!0,onClick:s,className:I.margin,children:"Hangup"}):Object(k.jsx)(b.a,{variant:"contained",color:"primary",startIcon:Object(k.jsx)(v.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return d(w)},className:I.margin,children:"Call"})]})]})}),t]})})},B=Object(u.a)((function(e){return{video:Object(o.a)({width:"550px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(o.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{backgroundColor:"#74A18E",padding:"10px",border:"2px solid grey",margin:"10px"}}})),D=function(){var e=Object(c.useContext)(N),t=e.name,a=e.callAccepted,n=e.MyVideo,r=e.userVideo,i=e.callEnded,l=e.stream,o=e.call,s=B();return Object(k.jsxs)(O.a,{container:!0,className:s.gridContainer,children:[l&&Object(k.jsx)(x.a,{className:s.paper,children:Object(k.jsxs)(O.a,{item:!0,xs:12,md:6,children:[Object(k.jsx)(j.a,{variant:"h5",style:{textAlign:"center",color:"#000000",marginBottom:"15px",padding:"3px"},children:Object(k.jsx)("b",{children:t||"Name"})}),Object(k.jsx)("video",{playsInline:!0,muted:!0,ref:n,autoPlay:!0,className:s.video})]})}),a&&!i&&Object(k.jsx)(x.a,{className:s.paper,children:Object(k.jsxs)(O.a,{item:!0,xs:12,md:6,children:[Object(k.jsx)(j.a,{variant:"h5",gutterBottom:!0,children:o.name||"Name"}),Object(k.jsx)("video",{playsInline:!0,ref:r,autoPlay:!0,className:s.video})]})})]})},R=function(){var e=Object(c.useContext)(N),t=e.answerCall,a=e.call,n=e.callAccepted;return Object(k.jsx)(k.Fragment,{children:a.isRecievedCall&&!n&&Object(k.jsxs)("div",{styles:{display:"flex",justifyContent:"center"},children:[Object(k.jsxs)("h1",{children:[a.name," is Calling:"]}),Object(k.jsx)(b.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"})]})})},V=a(57),T=a(56),U=a.n(T),W=U()("mode",{light:"#d1d1e0",dark:"#14141f"}),M=U()("mode",{light:"#111",dark:"#EEE"}),z=Object(V.b)(n||(n=Object(s.a)(["\nbody {\n  background-color: ",";\n  color: ",";\n}\n"])),W,M),L=Object(u.a)((function(e){return{appBar:Object(o.a)({borderRadius:15,margin:"30px 100px",display:"flex",flexDirection:"row",backgroundColor:"#33334d",justifyContent:"center",alignItems:"center",width:"600px",border:"2px solid black"},e.breakpoints.down("xs"),{width:"90%"}),image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),P=function(){var e=Object(c.useState)({mode:"light"}),t=Object(l.a)(e,2),a=t[0],n=t[1],r=L();return Object(k.jsx)(V.a,{theme:a,children:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(z,{}),Object(k.jsxs)("div",{className:r.wrapper,children:[Object(k.jsx)(d.a,{className:r.appBar,position:"static",color:"inherit",children:Object(k.jsxs)("table",{children:[Object(k.jsx)("tr",{children:Object(k.jsx)("td",{children:Object(k.jsx)(j.a,{variant:"h3",align:"center",style:{width:"100%",float:"top",display:"block",color:"#3333ff"},children:Object(k.jsx)("b",{children:"Video Call"})})})}),Object(k.jsx)("tr",{children:Object(k.jsx)("td",{style:{align:"center"},children:Object(k.jsx)(b.a,{style:{width:"100%",display:"block",marginBottom:"20px"},onClick:function(e){return n("dark"===a.mode?{mode:"light"}:{mode:"dark"})},variant:"outlined",color:"secondary",children:"Toggle Theme"})})})]})}),Object(k.jsx)(D,{}),Object(k.jsx)(E,{children:Object(k.jsx)(R,{})})]})]})})};a(155);i.a.render(Object(k.jsx)(I,{children:Object(k.jsx)(P,{})}),document.getElementById("root"))}},[[156,1,2]]]);
//# sourceMappingURL=main.76a15e31.chunk.js.map
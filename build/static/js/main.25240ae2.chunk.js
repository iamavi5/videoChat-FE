(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{141:function(e,t){},143:function(e,t){},155:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n(9),i=n.n(r),l=n(18),o=n(23),s=n(88),d=n(196),j=n(192),b=n(198),u=n(186),x=n(189),m=n(157),O=n(191),p=n(197),h=n(89),f=n(193),g=n(194),v=n(195),C=n(90),y=n(55),w=n.n(y),k=n(3),N=Object(c.createContext)(),A=Object(C.io)("https://av-vid-chat-app.herokuapp.com/"),S=function(e){var t=e.children,n=Object(c.useState)(null),a=Object(l.a)(n,2),r=a[0],i=a[1],o=Object(c.useState)(""),s=Object(l.a)(o,2),d=s[0],j=s[1],b=Object(c.useState)({}),u=Object(l.a)(b,2),x=u[0],m=u[1],O=Object(c.useState)(!1),p=Object(l.a)(O,2),h=p[0],f=p[1],g=Object(c.useState)(!1),v=Object(l.a)(g,2),C=v[0],y=v[1],S=Object(c.useState)(""),I=Object(l.a)(S,2),B=I[0],E=I[1],D=Object(c.useRef)(),R=Object(c.useRef)(),T=Object(c.useRef)();Object(c.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){i(e),D.current.srcObject=e})),A.on("me",(function(e){j(e)})),A.on("callUser",(function(e){var t=e.from,n=e.name,a=e.signal;m({isRecievedCall:!0,from:t,name:n,signal:a})}))}),[]);return Object(k.jsx)(N.Provider,{value:{call:x,callAccepted:h,MyVideo:D,userVideo:R,stream:r,name:B,setName:E,callEnded:C,me:d,callUser:function(e){var t=new w.a({initiator:!0,trickle:!1,stream:r});t.on("signal",(function(t){A.emit("callUser",{userToCall:e,signalData:t,from:d,name:B})})),t.on("stream",(function(e){R.current.srcObject=e})),A.on("callAccepted",(function(e){f(!0),t.signal(e)})),T.current=t},LeaveCall:function(){y(!0),T.current.destroy(),window.location.reload()},answerCall:function(){f(!0);var e=new w.a({initiator:!1,trickle:!1,stream:r});e.on("signal",(function(e){A.emit("answerCall",{signal:e,to:x.from})})),e.on("stream",(function(e){R.current.srcObject=e})),e.signal(x.signal),T.current=e}},children:t})},I=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(o.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(o.a)({width:"600px",margin:"35px 0",marginBottom:"80px",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{backgroundColor:"#33334d",padding:"10px 20px",border:"2px solid black"}}})),B=function(e){var t=e.children,n=Object(c.useContext)(N),a=n.me,r=n.callAccepted,i=n.name,o=n.setName,s=n.LeaveCall,d=n.callUser,u=n.callEnded,C=Object(c.useState)(""),y=Object(l.a)(C,2),w=y[0],A=y[1],S=I();return Object(k.jsx)(x.a,{className:S.container,children:Object(k.jsxs)(m.a,{elevation:10,className:S.paper,children:[Object(k.jsx)("form",{className:S.root,noValidate:!0,autoComplete:"off",children:Object(k.jsxs)(O.a,{container:!0,className:S.gridContainer,children:[Object(k.jsxs)(O.a,{item:!0,xs:12,md:6,className:S.padding,children:[Object(k.jsx)(j.a,{gutterBottom:!0,variant:"h6",children:Object(k.jsx)("b",{children:"Account info"})}),Object(k.jsx)(p.a,{label:"name",value:i,onChange:function(e){return o(e.target.value)},fullWidth:!0}),Object(k.jsx)(h.CopyToClipboard,{text:a,className:S.margin,children:Object(k.jsx)(b.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(k.jsx)(f.a,{fontSize:"large"}),children:"Copy your Id"})})]}),Object(k.jsxs)(O.a,{item:!0,xs:12,md:6,className:S.padding,children:[Object(k.jsx)(j.a,{gutterBottom:!0,variant:"h6",children:Object(k.jsx)("b",{children:"Make a Call"})}),Object(k.jsx)(p.a,{label:"ID to Call",value:w,onChange:function(e){return A(e.target.value)},fullWidth:!0}),r&&!u?Object(k.jsx)(b.a,{variant:"contained",color:"secondary",startIcon:Object(k.jsx)(g.a,{fontSize:"large"}),fullWidth:!0,onClick:s,className:S.margin,children:"Hangup"}):Object(k.jsx)(b.a,{variant:"contained",color:"primary",startIcon:Object(k.jsx)(v.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return d(w)},className:S.margin,children:"Call"})]})]})}),t]})})},E=Object(u.a)((function(e){return{video:Object(o.a)({width:"550px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(o.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{backgroundColor:"#74A18E",padding:"10px",border:"2px solid grey",margin:"10px"}}})),D=function(){var e=Object(c.useContext)(N),t=e.name,n=e.callAccepted,a=e.MyVideo,r=e.userVideo,i=e.callEnded,l=e.stream,o=e.call,s=E();return Object(k.jsxs)(O.a,{container:!0,className:s.gridContainer,children:[l&&Object(k.jsx)(m.a,{className:s.paper,children:Object(k.jsxs)(O.a,{item:!0,xs:12,md:6,children:[Object(k.jsx)(j.a,{variant:"h5",style:{textAlign:"center",color:"#000000",marginBottom:"15px",padding:"3px"},children:Object(k.jsx)("b",{children:t||"Name"})}),Object(k.jsx)("video",{playsInline:!0,muted:!0,ref:a,autoPlay:!0,className:s.video})]})}),n&&!i&&Object(k.jsx)(m.a,{className:s.paper,children:Object(k.jsxs)(O.a,{item:!0,xs:12,md:6,children:[Object(k.jsx)(j.a,{variant:"h5",gutterBottom:!0,children:o.name||"Name"}),Object(k.jsx)("video",{playsInline:!0,ref:r,autoPlay:!0,className:s.video})]})})]})},R=function(){var e=Object(c.useContext)(N),t=e.answerCall,n=e.call,a=e.callAccepted;return Object(k.jsx)(k.Fragment,{children:n.isRecievedCall&&!a&&Object(k.jsxs)("div",{styles:{display:"flex",justifyContent:"center"},children:[Object(k.jsxs)("h1",{children:[n.name," is Calling:"]}),Object(k.jsx)(b.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"})]})})},T=function(){return Object(k.jsx)("div",{className:"footer",children:Object(k.jsxs)("p",{children:["This app is created by ",Object(k.jsx)("b",{children:"Avinash Anand"})]})})},V=n(57),U=n(56),W=n.n(U),M=W()("mode",{light:"#d1d1e0",dark:"#14141f"}),z=W()("mode",{light:"#111",dark:"#EEE"}),L=Object(V.b)(a||(a=Object(s.a)(["\nbody {\n  background-color: ",";\n  color: ",";\n}\n"])),M,z),P=Object(u.a)((function(e){return{appBar:Object(o.a)({borderRadius:15,margin:"30px 100px",display:"flex",flexDirection:"row",backgroundColor:"#33334d",justifyContent:"center",alignItems:"center",width:"600px",border:"2px solid black"},e.breakpoints.down("xs"),{width:"90%"}),image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),F=function(){var e=Object(c.useState)({mode:"light"}),t=Object(l.a)(e,2),n=t[0],a=t[1],r=P();return Object(k.jsx)(V.a,{theme:n,children:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(L,{}),Object(k.jsxs)("div",{className:r.wrapper,children:[Object(k.jsx)(d.a,{className:r.appBar,position:"static",color:"inherit",children:Object(k.jsxs)("table",{children:[Object(k.jsx)("tr",{children:Object(k.jsx)("td",{children:Object(k.jsx)(j.a,{variant:"h3",align:"center",style:{width:"100%",float:"top",display:"block",color:"#3333ff"},children:Object(k.jsx)("b",{children:"Video Call"})})})}),Object(k.jsx)("tr",{children:Object(k.jsx)("td",{style:{align:"center"},children:Object(k.jsx)(b.a,{style:{width:"100%",display:"block",marginBottom:"20px"},onClick:function(e){return a("dark"===n.mode?{mode:"light"}:{mode:"dark"})},variant:"outlined",color:"secondary",children:"Toggle Theme"})})})]})}),Object(k.jsx)(D,{}),Object(k.jsx)(B,{children:Object(k.jsx)(R,{})}),Object(k.jsx)(T,{})]})]})})};n(155);i.a.render(Object(k.jsx)(S,{children:Object(k.jsx)(F,{})}),document.getElementById("root"))}},[[156,1,2]]]);
//# sourceMappingURL=main.25240ae2.chunk.js.map